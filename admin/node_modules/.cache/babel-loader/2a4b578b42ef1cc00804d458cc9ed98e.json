{"ast":null,"code":"var _jsxFileName = \"/Users/ccr2k/Desktop/foleyshop/admin/src/pages/newUser/NewUser.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./newUser.css\";\nimport { useState } from 'react';\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport app from \"../../firebase\";\nimport { useDispatch } from 'react-redux';\nimport { addUserStart, addUserSuccess, addUserFailure } from \"../../redux/userRedux\";\nimport { userRequest } from \"../../requestMethods\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewUser() {\n  _s();\n\n  const [inputs, setInputs] = useState({});\n  const [file, setFile] = useState(null);\n  const [cat, setCat] = useState([]);\n  const [error, setError] = useState(false);\n  const dispatch = useDispatch();\n\n  const handleChange = e => {\n    setInputs(prev => {\n      return { ...prev,\n        [e.target.name]: e.target.value\n      };\n    });\n  };\n\n  const handleCat = e => {\n    setCat(e.target.value.split(\",\"));\n  };\n\n  const randomImg = 'https://media.istockphoto.com/id/1131164548/vector/avatar-5.jpg?s=612x612&w=0&k=20&c=CK49ShLJwDxE4kiroCR42kimTuuhvuo2FH5y_6aSgEo=';\n\n  const handleClick = e => {\n    e.preventDefault();\n    const fileName = new Date().getTime() + ((file === null || file === void 0 ? void 0 : file.name) || randomImg);\n    const storage = getStorage(app);\n    const storageRef = ref(storage, fileName);\n    const uploadTask = uploadBytesResumable(storageRef, file || randomImg); //----------------------------------------------------------------\n    //----------------------------------------------------------------\n    //----------------------------------------------------------------\n    // Register three observers:\n    // 1. 'state_changed' observer, called any time the state changes\n    // 2. Error observer, called on failure\n    // 3. Completion observer, called on successful completion\n\n    uploadTask.on('state_changed', snapshot => {\n      // Observe state change events such as progress, pause, and resume\n      // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n      const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n      console.log('Upload is ' + progress + '% done');\n\n      switch (snapshot.state) {\n        case 'paused':\n          console.log('Upload is paused');\n          break;\n\n        case 'running':\n          console.log('Upload is running');\n          break;\n\n        default:\n      }\n    }, error => {// Handle unsuccessful uploads\n    }, () => {\n      // Handle successful uploads on complete\n      // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n      getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n        const currentUser = { ...inputs,\n          img: downloadURL,\n          categories: cat\n        };\n        /*addProduct(product, dispatch).then((res) => {\n            console.log(res.status);\n          })*/\n\n        const addUser = async () => {\n          dispatch(addUserStart());\n\n          try {\n            const res = await userRequest.post(`/users/`, currentUser);\n\n            if (res.data) {\n              dispatch(addUserSuccess(res.data));\n              setError(false);\n            }\n          } catch (err) {\n            console.log(err);\n            dispatch(addUserFailure());\n            setError(true);\n          }\n        };\n\n        currentUser && addUser();\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"newUser\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"newUserTitle\",\n      children: \"New User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"newUserForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newUserItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"file\",\n          onChange: e => setFile(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"john\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newUserItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Full Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"John Smith\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newUserItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"john@gmail.com\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newUserItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newUserItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Phone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"+1 123 456 78\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newUserItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"New York | USA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newUserItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Gender\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"newUserGender\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"gender\",\n            id: \"male\",\n            value: \"male\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"male\",\n            children: \"Male\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"gender\",\n            id: \"female\",\n            value: \"female\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"female\",\n            children: \"Female\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"gender\",\n            id: \"other\",\n            value: \"other\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"other\",\n            children: \"Other\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newUserItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"newUserSelect\",\n          name: \"active\",\n          id: \"active\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"yes\",\n            children: \"Yes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"no\",\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClick,\n        className: \"newUserButton\",\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"name already exists\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewUser, \"fF9VnyeqmMQq3Xwrc/ubJQSOEPI=\", false, function () {\n  return [useDispatch];\n});\n\n_c = NewUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewUser\");","map":{"version":3,"sources":["/Users/ccr2k/Desktop/foleyshop/admin/src/pages/newUser/NewUser.jsx"],"names":["useState","getStorage","ref","uploadBytesResumable","getDownloadURL","app","useDispatch","addUserStart","addUserSuccess","addUserFailure","userRequest","NewUser","inputs","setInputs","file","setFile","cat","setCat","error","setError","dispatch","handleChange","e","prev","target","name","value","handleCat","split","randomImg","handleClick","preventDefault","fileName","Date","getTime","storage","storageRef","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","then","downloadURL","currentUser","img","categories","addUser","res","post","data","err","files"],"mappings":"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","sourcesContent":["import \"./newUser.css\";\nimport { useState } from 'react';\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport app from \"../../firebase\";\nimport { useDispatch } from 'react-redux';\nimport { addUserStart, addUserSuccess, addUserFailure } from \"../../redux/userRedux\";\nimport { userRequest } from \"../../requestMethods\";\n\n\nexport default function NewUser() {\n  const [ inputs, setInputs] = useState({});\n  const [ file, setFile] = useState(null);\n  const [ cat, setCat] = useState([]);\n  const [error, setError] = useState(false)\n  const dispatch = useDispatch()\n\n  const handleChange = (e) => { \n    setInputs((prev) => {\n      return {...prev, [e.target.name]: e.target.value };\n    })\n   }\n   const handleCat = (e) => { \n    setCat(e.target.value.split(\",\"));\n   };\nconst randomImg = 'https://media.istockphoto.com/id/1131164548/vector/avatar-5.jpg?s=612x612&w=0&k=20&c=CK49ShLJwDxE4kiroCR42kimTuuhvuo2FH5y_6aSgEo='\n   const handleClick = (e) => {\n    e.preventDefault()\n    const fileName = new Date().getTime() + (file?.name || randomImg)\n    const storage = getStorage(app);\n    const storageRef = ref(storage, fileName);\n    const uploadTask = uploadBytesResumable(storageRef, (file || randomImg));\n\n    //----------------------------------------------------------------\n    //----------------------------------------------------------------\n    //----------------------------------------------------------------\n    \n// Register three observers:\n    // 1. 'state_changed' observer, called any time the state changes\n    // 2. Error observer, called on failure\n    // 3. Completion observer, called on successful completion\n    uploadTask.on('state_changed', \n      (snapshot) => {\n        // Observe state change events such as progress, pause, and resume\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload is ' + progress + '% done');\n        switch (snapshot.state) {\n          case 'paused':\n            console.log('Upload is paused');\n            break;\n          case 'running':\n            console.log('Upload is running');\n            break;\n            default:\n        }\n      }, \n      (error) => {\n        // Handle unsuccessful uploads\n      }, \n      () => {\n        // Handle successful uploads on complete\n        // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n        getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n         const currentUser = { ...inputs, img: downloadURL, categories: cat };\n          \n        /*addProduct(product, dispatch).then((res) => {\n            console.log(res.status);\n          })*/\n\n          const addUser = async () => \n      { dispatch(addUserStart());\n        try {\n          const res = await userRequest.post(`/users/`, currentUser);\n          if (res.data) {\n           dispatch(addUserSuccess(res.data));\n           setError(false)\n         }\n          }catch(err){\n        console.log(err);\n          dispatch(addUserFailure());\n          setError(true)\n\n         }\n};\ncurrentUser && addUser()\n     \n\n        });\n      }\n    );\n   }\n\n  return (\n    <div className=\"newUser\">\n      <h1 className=\"newUserTitle\">New User</h1>\n      <form className=\"newUserForm\">\n        <div className=\"newUserItem\">\n        <label>Image</label>\n          <input \n          type=\"file\" \n          id=\"file\" \n          onChange={(e) => setFile(e.target.files[0])} \n          />\n          <label>Username</label>\n          <input type=\"text\" placeholder=\"john\" />\n        </div>\n        <div className=\"newUserItem\">\n          <label>Full Name</label>\n          <input type=\"text\" placeholder=\"John Smith\" />\n        </div>\n        <div className=\"newUserItem\">\n          <label>Email</label>\n          <input type=\"email\" placeholder=\"john@gmail.com\" />\n        </div>\n        <div className=\"newUserItem\">\n          <label>Password</label>\n          <input type=\"password\" placeholder=\"password\" />\n        </div>\n        <div className=\"newUserItem\">\n          <label>Phone</label>\n          <input type=\"text\" placeholder=\"+1 123 456 78\" />\n        </div>\n        <div className=\"newUserItem\">\n          <label>Address</label>\n          <input type=\"text\" placeholder=\"New York | USA\" />\n        </div>\n\n        <div className=\"newUserItem\">\n          <label>Gender</label>\n          <div className=\"newUserGender\">\n            <input type=\"radio\" name=\"gender\" id=\"male\" value=\"male\" />\n            <label for=\"male\">Male</label>\n            <input type=\"radio\" name=\"gender\" id=\"female\" value=\"female\" />\n            <label for=\"female\">Female</label>\n            <input type=\"radio\" name=\"gender\" id=\"other\" value=\"other\" />\n            <label for=\"other\">Other</label>\n          </div>\n        </div>\n        <div className=\"newUserItem\">\n          <label>Active</label>\n          <select className=\"newUserSelect\" name=\"active\" id=\"active\">\n            <option value=\"yes\">Yes</option>\n            <option value=\"no\">No</option>\n          </select>\n        </div>\n        <button onClick={handleClick} className=\"newUserButton\">Create</button>\n        {error && <div>name already exists</div>}\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}